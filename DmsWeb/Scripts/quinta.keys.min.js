(function(n,t){function e(n){t(".focus").removeClass("focus");i.addClass("focus");var r=i.attr("data-focusable-tip");n&&o[r](i)}function s(n){if(n){var t=n.attr("data-focusable-tip");h.hasOwnProperty(t)&&h[t](n)}}var c={0:"48","0 numerička":"96",1:"49","1 numerička":"97",2:"50","2 numerička":"98",3:"51","3 numerička":"99",4:"52","4 numerička":"100",5:"53","5 numerička":"101",6:"54","6 numerička":"102",7:"55","7 numerička":"103",8:"56","8 numerička":"104",9:"57","9 numerička":"105",A:"65",Alt:"18",B:"66",Backslash:"220",Backspace:"8",C:"67",Capslock:"20",Coma:"188",Crtica:"109",Ctrl:"17",D:"68",Delete:"46",Dot:"110",E:"69",End:"35",Enter:"13",Esc:"27",F:"70",F1:"112",F2:"113",F3:"114",F4:"115",F5:"116",F6:"117",F7:"118",F8:"119",F9:"120",F10:"121",F11:"122",F12:"123",G:"71",H:"72",Home:"36",I:"73",Insert:"45",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Pagedown:"34",Pageup:"33",Pause:"19",Plus:"107",Q:"81",R:"82",S:"83",Shift:"16",Slash:"191",Slash1:"111","Strelica desno":"39","Strelica dole":"40","Strelica gore":"38","Strelica levo":"37",T:"84",Tab:"9",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",Zvezdica:"106",equal:"187"},l=t(window),f,u,i,r,a,o,h;n.otvorenProzor=!1;a=function(n){t("#helpWindowContent").html(n);var i=t("#helpWindow");i.jqxWindow({position:"center"});i.jqxWindow("open");i.focus()};n.GlobalKeydown=function(r){n.otvorenProzor||r.altKey&&r.keyCode==18||(r.altKey&&(r.preventDefault(),f.hasOwnProperty(r.keyCode)&&f[r.keyCode].func(r.keyCode)),r.shiftKey||r.keyCode!=9||(r.preventDefault(),t(document).trigger("quinta-changeFocus-fw")),r.shiftKey&&r.keyCode==9&&(r.preventDefault(),t(document).trigger("quinta-changeFocus-bk")),(r.keyCode==37||r.keyCode==38||r.keyCode==39||r.keyCode==40)&&i&&n.HendlerStrelica(r),r.keyCode==13&&i&&n.HendlerEntera(r),r.keyCode==46&&i&&n.HendlerDelete(r))};n.RegistujPrecice=function(i,r){var u,e,o;t(document).on("keydown",n.GlobalKeydown);if(f={},i)for(u in i)e=i[u],e.naziv=u,c.hasOwnProperty(u)?(o=c[u],f[o]=e):alert("Precica nije dobro registrovana: "+u);r&&n.NapraviShortCut(r)};n.NapraviShortCut=function(n){var i=t("#"+n),r=_pathImgB+"keys24.png";i.prepend('<div id="keysIconWrap" style="height:0;position:relative"><img src='+r+' id="keysIcon" /><\/div>');t("#keysIcon").click(function(){var t="<h2>"+document.title+"<\/h2>",i,n;for(i in f)n=f[i],t+='<p><b style="display:inline-block;min-width:140px">ALT + '+n.naziv+":<\/b>"+n.opis+"<\/p>";a(t)})};n.RegistrujFocusablePolja=function(f,o,h){var c=0,l;if(h){for(l in u)c++;if(u.hasOwnProperty(c)){alert("Polje ne moze da se doda!");return}}else u={};if(f.each(function(){var n=t(this);n.attr("data-focusable-idx",c);u[c]=n;n.click(function(){s(i);i=t(this);r=parseInt(t(this).attr("data-focusable-idx"));e(!1)});c++}),!h){t(document).on("quinta-changeFocus-fw",n.GlobalChangeFocusFw);t(document).on("quinta-changeFocus-bk",n.GlobalChangeFocusBk)}o&&(o--,i=f.eq(o),i.length?r=o:(i=f.eq(0),r=0),e(!0))};o={r1:function(n){n.find(".myInput").focus().select()},r11:function(n){n.find(".myInput").focus().select()},r2:function(n){n.find(".qui").click()},r3:function(n){n.find("input").click()},r4:function(){return!1},r5:function(n){n.find("input").focus().select()},t1:function(n){n.find("tbody.tbodyFocus tr:visible").eq(0).addClass("qTrKliknut")},t2:function(n){n.find("tbody.tbodyFocus tr:visible:first td.qTabelaTdPromena:visible:first").click()}};h={t1:function(n){n.find(".qTrKliknut").removeClass("qTrKliknut")}};n.GlobalChangeFocusFw=function(){document.activeElement.blur();l.click();var n=r+1;(u.hasOwnProperty(n)||(n=0),n!=r)&&(s(i),r=n,i=u[r],e(!0))};n.GlobalChangeFocusBk=function(){document.activeElement.blur();l.click();var n=r-1;u.hasOwnProperty(n)&&(s(i),r=n,i=u[r],e(!0))};n.HendlerStrelica=function(n){var f=i.attr("data-focusable-tip"),t,r,u;f=="t1"&&(n.preventDefault(),t=i.find(".qTrKliknut"),t.length?(n.keyCode==38&&(r=t.prevAll(":visible").eq(0),r.length&&(t.removeClass("qTrKliknut"),r.addClass("qTrKliknut").moveBodyTo())),n.keyCode==40&&(u=t.nextAll(":visible").eq(0),u.length&&(t.removeClass("qTrKliknut"),u.addClass("qTrKliknut").moveBodyTo()))):o[f](i))};n.HendlerEntera=function(n){var r=i.attr("data-focusable-tip");r=="r11"&&t(document).trigger("quinta-changeFocus-fw");r=="r4"&&i.find(".qui").quiCheckBox("toggle");r=="t1"&&(n.preventDefault(),i.find(".qTrKliknut").click())};n.HendlerDelete=function(n){var t=i.attr("data-focusable-tip");t=="t1"&&(n.preventDefault(),i.find(".qTrKliknut .x").click())};n.SkloniSveEventove=function(){t(document).off("keydown",n.GlobalKeydown);t(document).off("quinta-changeFocus-fw",n.GlobalChangeFocusFw);t(document).off("quinta-changeFocus-bk",n.GlobalChangeFocusBk);t("#keysIconWrap").remove()};n.LogPrecice=function(){log(f)};n.LogPolja=function(){log(u)};n.LogAktivnoPolje=function(){var n={obj:i,idx:r};log(n)}})(window.qKeys=window.qKeys||{},jQuery);