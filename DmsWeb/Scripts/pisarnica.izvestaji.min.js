(function(n,t,i){function ir(n){var t,r;for(t in b)if(t!==i&&b[t]!==""&&((r=f.getColumns()[f.getColumnIndex(t)],n[r.field]==i)||!n[r.field].toLowerCase().contains(b[t].toLowerCase())))return!1;return!0}function rr(n){var t,r,f;for(t in p)if(t!==i&&p[t]!==""){if(r=2,t==1&&(r=0),f=u.getColumns()[u.getColumnIndex(t)],n[f.field]==i)return!1;if(r==0){if(!n[f.field].toLowerCase().contains(p[t].toLowerCase()))return!1}else if(r==2&&n[f.field]!=p[t].toDecimal())return!1}return!0}function ur(n,t,r,u,f){return f.IdPredmeta!=i?'<i class="fa fa-reply link" data-id="'+f.IdPredmeta+'"><\/i>':""}function fr(n,t,r,u,f){return f.IdPredmeta!=i?'<div class="qTdPopupPredmeti" data-idPredmeta="'+f.IdPredmeta+'">'+nonull(r)+"<\/div>":""}function yt(n,t,i){return'<div title="'+nonull(i)+'">'+nonull(i)+"<\/div>"}function di(n){return n+1}function er(){r.Okruzi&&r.Okruzi.length>1&&s.quiComboBox("clearSelection");l.quiComboBox("clearSelection");v.quiComboBox("clearSelection");k.quiComboBox("clearSelection");a.quiComboBox("clearSelection");d.quiComboBox("selectItemByData",ni);pt.val("");y.quiComboBox("clearSelection");rt.quiDate("clearDate");ut.quiDate("clearDate");ii.find('input[value="0"]').prop("checked",!0);g.quiComboBox("clearSelection");nt.quiComboBox("clearSelection");wt.val("");bt.val("");at.val("");ft.quiComboBox("clearSelection");vt.val("");et.quiComboBox("clearSelection");kt.val("");ot.quiDate("clearDate");st.quiComboBox("clearSelection");dt.val("");w.quiComboBox("clearSelection");it.find('input[value="0"]').prop("checked",!0);ri.find('input[value="0"]').prop("checked",!0);t("#izvestajiNemaRez").hide();t("#izvestajiAnalitikaSlickGrid").empty();t("#izvestajiAnalitikaSlickGridPager").empty();t("#izvestajiSintetikaSlickGrid").empty();t("#izvestajiSintetikaSlickGridPager").empty();f=i;u=i;b={};p={};t("#izvestajiSintetikaSlickGridWrap").hide();t("#izvestajiAnalitikaSlickGridWrap").hide()}function tt(){var n=t("#izvestajiBtnPretrazi").find("table"),e,r;n.hasClass("teloDugmeIskljuceno")||(e=hr(),r=it.find('input[value="0"]').prop("checked"),t("#izvestajiSintetikaSlickGrid").empty(),t("#izvestajiSintetikaSlickGridPager").empty(),t("#izvestajiAnalitikaSlickGrid").empty(),t("#izvestajiAnalitikaSlickGridPager").empty(),t("#izvestajiSintetikaSlickGridWrap").hide(),t("#izvestajiAnalitikaSlickGridWrap").hide(),f=i,u=i,b={},p={},n.addClass("teloDugmeIskljuceno"),t.ajax({type:"GET",url:vi,data:{pretragaJ:JSON.stringify(e),sintetika:r,tipIzvestaja:ct},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var i=n.Data;i&&i.length>0?(r?or(i):sr(i),t("#izvestajiNemaRez").hide()):t("#izvestajiNemaRez").show()},complete:function(){n.removeClass("teloDugmeIskljuceno")}}))}function or(n){var f,r,h,o,s,c,l;for(t("#izvestajiSintetikaSlickGridWrap").show(),f=[],r=0;r<n.length;++r)h=n[r],o=t.extend({},h),o.id=r,f.push(o);s=[{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("R. br."),id:0,width:45,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:di},{field:"Grupisanje",name:qKonverzija.VratiLokalizovaniTekst("Grupisanje"),id:1,width:220,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:yt},{field:"UkupanBrojPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Ukupan broj"),id:2,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd ukupno",cssClass:"qTabelaTd"},{field:"BrojRezervisanihPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Rezervisani"),id:3,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd rezervisani",cssClass:"qTabelaTd"},{field:"BrojAktivnihPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Aktivni"),id:4,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd aktivni",cssClass:"qTabelaTd"},{field:"BrojZatvorenihPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Zatvoreni"),id:5,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd zatvoreni",cssClass:"qTabelaTd"},{field:"BrojPrezavedenihPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Prezavedeni"),id:6,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd prezavedeni",cssClass:"qTabelaTd"},{field:"BrojPredmetaURokovniku",name:qKonverzija.VratiLokalizovaniTekst("U rokovniku"),id:7,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd rokovnik",cssClass:"qTabelaTd"},{field:"BrojObrisanihhPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Obrisani"),id:8,width:85,sortable:!0,headerCssClass:"qTabelaHeadTd obrisani",cssClass:"qTabelaTd"},{field:"BrojRezervisanihPredmetaPrekoRoka",name:qKonverzija.VratiLokalizovaniTekst("Rezervisani preko roka"),id:9,width:150,sortable:!0,headerCssClass:"qTabelaHeadTd rezervisaniPrekoRoka",cssClass:"qTabelaTd"},{field:"BrojOtvorenihPredmetaPrekoRoka",name:qKonverzija.VratiLokalizovaniTekst("Otvoreni preko roka"),id:10,width:140,sortable:!0,headerCssClass:"qTabelaHeadTd otvoreniPrekoRoka",cssClass:"qTabelaTd"}];e=new Slick.Data.DataView;u=new Slick.Grid("#izvestajiSintetikaSlickGrid",e,s,ki);u.setSelectionModel(new Slick.RowSelectionModel);c=new Slick.Controls.Pager(e,u,t("#izvestajiSintetikaSlickGridPager"));l=new Slick.Controls.ColumnPicker(s,u,ki);e.onRowCountChanged.subscribe(function(){u.updateRowCount();u.render();ti()});e.onRowsChanged.subscribe(function(n,t){u.invalidateRows(t.rows);u.render();ti()});t(u.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(p[n]=t.trim(t(this).val()),e.refresh())});u.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(p[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter");ti()});u.onColumnsReordered.subscribe(function(){ti()});u.onColumnsResized.subscribe(function(){t(".slick-header-columns.ui-sortable:eq(0)").find(".qTabelaHeadTd").each(function(n){t(".slick-footer-columns:eq(0)").find(".qTabelaHeadTd:eq("+n+")").width(t(this).width())})});u.onSort.subscribe(function(n,t){var r=function(n,r){var l=t.sortCol.field,e=t.sortAsc?1:-1,u=n[l],f=r[l],s,a,o,h,c;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=1,a=t.sortCol.id,a==1&&(s=0),s==1?o=(u==f?0:u>f?1:-1)*e:(h=u.toLowerCase(),c=f.toLowerCase(),o=(h==c?0:h>c?1:-1)*e),o!=0)?o:0};e.sort(r)});u.onSelectedRowsChanged.subscribe(function(n,t){if(t.rows.length>0){var i=t.grid.getDataItem(t.rows[0]);pr(i)}});u.init();e.beginUpdate();e.setItems(f);e.setFilter(rr);e.endUpdate()}function sr(n){var u,r,h,e,s,c,l;for(t("#izvestajiAnalitikaSlickGridWrap").show(),u=[],r=0;r<n.length;++r)h=n[r],e=t.extend({},h),e.id=r,u.push(e);s=[{field:"IdPredmeta",name:"",id:0,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:ur,customPolje:!0},{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:1,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:di},{field:"SifraPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Šifra predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:fr},{field:"Podnosilac",name:qKonverzija.VratiLokalizovaniTekst("Podnosilac"),id:3,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:yt},{field:"NazivInspektora",name:qKonverzija.VratiLokalizovaniTekst("Inspektor"),id:4,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:yt},{field:"Sadrzaj",name:qKonverzija.VratiLokalizovaniTekst("Sadržaj"),id:5,width:260,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:yt},{field:"LiceKontrole",name:qKonverzija.VratiLokalizovaniTekst("Lice kontrole"),id:6,width:160,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:yt}];o=new Slick.Data.DataView;f=new Slick.Grid("#izvestajiAnalitikaSlickGrid",o,s,bi);f.setSelectionModel(new Slick.RowSelectionModel);c=new Slick.Controls.Pager(o,f,t("#izvestajiAnalitikaSlickGridPager"));l=new Slick.Controls.ColumnPicker(s,f,bi);o.onRowCountChanged.subscribe(function(){f.updateRowCount();f.render()});o.onRowsChanged.subscribe(function(n,t){f.invalidateRows(t.rows);f.render()});t(f.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(b[n]=t.trim(t(this).val()),o.refresh())});f.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0&&i.column.id!=1){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(b[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});f.onSort.subscribe(function(n,t){var r=function(n,r){var c=t.sortCol.field,e=t.sortAsc?1:-1,u=n[c],f=r[c],o,s,h;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=u.toLowerCase(),h=f.toLowerCase(),o=(s==h?0:s>h?1:-1)*e,o!=0)?o:0};o.sort(r)});f.onClick.subscribe(function(n,i){var r=i.row;if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var u=f.getDataItem(r),e="&idPredmeta="+u.IdPredmeta+"&close=true",o="#./Predmeti?tipDokumenta=3"+e;window.open(location.origin+o,"_blank")}});f.init();o.beginUpdate();o.setItems(u);o.setFilter(ir);o.endUpdate()}function ti(){for(var n,i,u=0,f=0,o=0,s=0,h=0,c=0,l=0,a=0,v=0,r=0;r<e.getLength();++r)n=e.getItem(r),u+=n.UkupanBrojPredmeta,f+=n.BrojRezervisanihPredmeta,o+=n.BrojAktivnihPredmeta,s+=n.BrojZatvorenihPredmeta,l+=n.BrojPrezavedenihPredmeta,c+=n.BrojPredmetaURokovniku,h+=n.BrojObrisanihhPredmeta,a+=n.BrojRezervisanihPredmetaPrekoRoka,v+=n.BrojOtvorenihPredmetaPrekoRoka;i=t(".slick-footer-columns:eq(0)");i.find(".qTabelaHeadTd.ukupno span").text(u);i.find(".qTabelaHeadTd.rezervisani span").text(f);i.find(".qTabelaHeadTd.aktivni span").text(o);i.find(".qTabelaHeadTd.zatvoreni span").text(s);i.find(".qTabelaHeadTd.prezavedeni span").text(l);i.find(".qTabelaHeadTd.rokovnik span").text(c);i.find(".qTabelaHeadTd.obrisani span").text(h);i.find(".qTabelaHeadTd.rezervisaniPrekoRoka span").text(a);i.find(".qTabelaHeadTd.otvoreniPrekoRoka span").text(v)}function hr(){var e=l.quiComboBox("getSelectedItemData"),n=a.quiComboBox("getSelectedItemData"),u=ei.val().trimnull(),r=y.quiComboBox("getSelectedItemData"),f=oi.val().trimnull();return e==i&&(n!=i&&(u=n,n=i),r!=i&&(f=r,r=i)),{IdOkruga:s.quiComboBox("getSelectedItemData"),IdOrgana:l.quiComboBox("getSelectedItemData"),IdKlase:n,BrojPredmeta:pt.val().trimnull(),Godina:d.quiComboBox("getSelectedItemData"),OdDatuma:rt.quiDate("getJSONDateNoTZ"),DoDatuma:ut.quiDate("getJSONDateNoTZ"),IdJedinice:r,Status:g.quiComboBox("getSelectedItemData"),IdKreatora:nt.quiComboBox("getSelectedItemData"),IdVrstePredmeta:ft.quiComboBox("getSelectedItemData"),IdInspektora:w.quiComboBox("getSelectedItemData"),Podnosilac:wt.val().trimnull(),LiceKontrole:bt.val().trimnull(),Sadrzaj:at.val().trimnull(),IdTakse:et.quiComboBox("getSelectedItemData"),StraniBroj:kt.val().trimnull(),Rok:vt.val().trimnull(),PreRoka:t("#izvestajiRokRadioWrap").find("input:eq(0)").prop("checked"),DatumKretanja:ot.quiDate("getJSONDateNoTZ"),IdKretanjaPredmeta:st.quiComboBox("getSelectedItemData"),OpisKretanja:dt.val().trimnull(),IdOpstine:v.quiComboBox("getSelectedItemData"),OznakaOrgana:fi.val().trimnull(),OznakaKlase:u,OznakaJedinice:f,GledanjeDatumaKreiranja:ri.find("input:eq(0)").prop("checked"),IdMestaOpstine:k.quiComboBox("getSelectedItemData")}}function cr(){var n=t("#izvestajiBtnStampa").find("table"),u,i,f,r,e;n.hasClass("teloDugmeIskljuceno")||(u=it.find('input[value="0"]').prop("checked"),n.addClass("teloDugmeIskljuceno"),u?(i=lr(),i&&i.length>0&&(f={stavkeJ:JSON.stringify(i),tipIzvestaja:ct},qStampa.PrikaziDijalogStampe(pi,f,!1,!1,"POST")),n.removeClass("teloDugmeIskljuceno")):(r=ar(),r&&r.length>0&&(e={listaPredmetaJ:JSON.stringify(r)},qStampa.PrikaziDijalogStampe(yi,e,!1,!1,"POST")),n.removeClass("teloDugmeIskljuceno")))}function lr(){var r,f,t,n,o;if(u==i||e==i)return i;for(r=[],f=e.getItems(),t=0;t<f.length;++t)n=f[t],o={Grupisanje:qKonverzija.VratiLokalizovaniTekst(n.Grupisanje),UkupanBrojPredmeta:n.UkupanBrojPredmeta,BrojRezervisanihPredmeta:n.BrojRezervisanihPredmeta,BrojAktivnihPredmeta:n.BrojAktivnihPredmeta,BrojZatvorenihPredmeta:n.BrojZatvorenihPredmeta,BrojObrisanihhPredmeta:n.BrojObrisanihhPredmeta,BrojOtvorenihPredmetaPrekoRoka:n.BrojOtvorenihPredmetaPrekoRoka},r.push(o);return r}function ar(){var t,r,n,u;if(f==i||o==i)return i;for(t=[],r=o.getItems(),n=0;n<r.length;++n)u=r[n],t.push(u.IdPredmeta);return t}function vr(n){n.css("text-align","right");n.on("click",function(){n.select()});n.on("focus",function(){n.val(n.val()).css("text-align","left")});n.on("blur",function(){var i,t;if(n.css("text-align","right"),i=n.val().trim(),i===""){n.val(i);n.attr("data-val",i);return}if(t=parseInt(i),isNaN(t)||t<0){n.val(n.attr("data-val"));return}if(t==n.attr("data-val")){n.val(t);return}n.val(t);n.attr("data-val",t)});n.on("keypress",function(t){t.keyCode==13&&n.blur()})}function gi(n){t.ajax({type:"GET",url:hi,data:{idOkruga:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}v.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function ui(n,r,u){t.ajax({type:"GET",url:ci,data:{idOkruga:n,idOrgana:r},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}a.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa");u!=i&&(a.quiComboBox("selectItemByData",u),tt())},complete:function(){}})}function nr(n){t.ajax({type:"GET",url:li,data:{idOrgana:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}y.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function yr(n){t.ajax({type:"GET",url:ai,data:{idOkruga:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}w.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function pr(n){var t,i,r,u,f;it.find('input[value="1"]').prop("checked",!0);t=n.IdGrupisanja;switch(ct){case 1:nt.quiComboBox("selectItemByData",t);tt();break;case 2:w.quiComboBox("selectItemByData",t);tt();break;case 3:l.quiComboBox("selectItemByData",t);tt();break;case 4:t.contains("|")&&(i=t.split("|"),i.length==2&&(r=i[0],u=i[1],l.quiComboBox("selectItemByDataNoTrigger",r),f=s.quiComboBox("getSelectedItemData"),ui(f,r,u)));break;case 5:at.val(t);tt();break;case 6:g.quiComboBox("selectItemByData",t);tt()}}function wr(n,i){t.ajax({type:"GET",url:wi,data:{idOkruga:n,idOpstine:i},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}k.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}var r,ct,lt,it,s,v,k,l,a,d,pt,y,rt,ut,ii,g,wt,bt,at,ft,vt,et,kt,ot,st,dt,w,nt,fi,ei,oi,ri,gt=150,si=100,h=254,c=300,ni,hi,ci,li,ai,tr,vi,yi,pi,wi,ht=360,b={},f,o,bi={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20},p={},u,e,ki={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,showFooterRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){r=qUtils.IzvuciVM("#vm",!0);t("#izvestajiNaslov").text(t("#meniIzvestaji").find(".hederMeniDugme.meniDugmeKliknuto .hederMeniDugmeText").text());b={};f=i;o=i;p={};u=i;e=i;ct=parseInt(t("#tipIzvestaja").text().trimnull());ni=t("#tekucaGodina").text().trimnull();hi=t("#url_VratiOpstine").text();ci=t("#url_VratiKlase").text();li=t("#url_VratiJedinice").text();ai=t("#url_VratiInspektoreOkruga").text();tr=t("#url_BrisanjePredmeta").text();vi=t("#url_VratiPredmetePretrage").text();yi=t("#url_VratiStampePretrazenihPredmeta").text();pi=t("#url_VratiStampeSintetikePredmeta").text();wi=t("#url_VratiMestaOpstine").text();fi=t("#izvestajiOznakaOrgana");ei=t("#izvestajiOznakaKlase");oi=t("#izvestajiOznakaJedinice");lt=t("#izvestajiGrupisanje");it=t("#izvestajiSintetikaRadioWrap");s=t("#izvestajiOkruzi");v=t("#izvestajiOpstine");k=t("#izvestajiMestaOpstine");l=t("#izvestajiOrgani");a=t("#izvestajiKlase");d=t("#izvestajiGodine");pt=t("#izvestajiPredmet");y=t("#izvestajiJedinice");rt=t("#izvestajiOdDatuma");ut=t("#izvestajiDoDatuma");ii=t("#izvestajiRokRadioWrap");g=t("#izvestajiStatusi");nt=t("#izvestajiKreatori");wt=t("#izvestajiPodnosilac");bt=t("#izvestajiLiceKontrole");at=t("#izvestajiSadrzaj");ft=t("#izvestajiVrstePredmeta");vt=t("#izvestajiRok");et=t("#izvestajiTakse");kt=t("#izvestajiStraniBroj");ri=t("#izvestajiDatumRadioWrap");w=t("#izvestajiInspektori");ot=t("#izvestajiDatumKretanja");st=t("#izvestajiVrsteKretanja");dt=t("#izvestajiOpisKretanja");lt.quiComboBox({listWidth:c,width:gt,showX:!0});lt.quiComboBox("setItemsFromBinding",r.Grupisanja,"Naziv","IdElementa");lt.quiComboBox("selectItemByData",ct);lt.quiComboBox("enable",!1);s.quiComboBox({listWidth:c,width:gt,showX:!0});s.quiComboBox("setItemsFromBinding",r.Okruzi,"Naziv","IdElementa");v.quiComboBox({listWidth:c,width:h,showX:!0});k.quiComboBox({listWidth:c,width:h,showX:!0});r.Okruzi&&r.Okruzi.length==1&&(s.quiComboBox("selectItemByIndex",0),s.quiComboBox("enable",!1),r.Opstine!=i?v.quiComboBox("setItemsFromBinding",r.Opstine,"Naziv","IdElementa"):gi(r.Okruzi[0].IdElementa));l.quiComboBox({listWidth:c,width:gt,showX:!0});l.quiComboBox("setItemsFromBinding",r.Organi,"Naziv","IdElementa");a.quiComboBox({listWidth:c,width:gt,showX:!0});a.quiComboBox("setItemsFromBinding",r.Klase,"Naziv","IdElementa");d.quiComboBox({listWidth:c,width:si,showX:!0});d.quiComboBox("setItemsFromBinding",r.Godine,"Naziv","IdElementa");d.quiComboBox("selectItemByData",ni);y.quiComboBox({listWidth:c,width:si,showX:!0});y.quiComboBox("setItemsFromBinding",r.Jedinice,"Naziv","IdElementa");rt.quiDate({width:h,showX:!0});rt.quiDate("clearDate");ut.quiDate({width:h,showX:!0});ut.quiDate("clearDate");g.quiComboBox({listWidth:c,width:h,showX:!0});g.quiComboBox("setItemsFromBinding",r.Statusi,"Naziv","IdElementa");nt.quiComboBox({listWidth:c,width:h,showX:!0});nt.quiComboBox("setItemsFromBinding",r.Kreatori,"Naziv","IdElementa");ft.quiComboBox({listWidth:c,width:h,showX:!0});ft.quiComboBox("setItemsFromBinding",r.VrstePredmeta,"Naziv","IdElementa");et.quiComboBox({listWidth:c,width:h,showX:!0});et.quiComboBox("setItemsFromBinding",r.Takse,"Naziv","IdElementa");ot.quiDate({width:h,showX:!0});ot.quiDate("clearDate");st.quiComboBox({listWidth:h,width:h,showX:!0});st.quiComboBox("setItemsFromBinding",r.KretanjaPredmeta,"Naziv","IdElementa");w.quiComboBox({listWidth:h,width:h,showX:!0});r.Inspektori&&r.Inspektori.length>0&&w.quiComboBox("setItemsFromBinding",r.Inspektori,"Naziv","IdElementa");s.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=l.quiComboBox("getSelectedItemData");a.quiComboBox("clearItems");v.quiComboBox("clearItems");k.quiComboBox("clearItems");y.quiComboBox("clearItems");n!=i&&(ui(n,t),nr(t),yr(n),gi(n))});l.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=l.quiComboBox("getSelectedItemData");a.quiComboBox("clearItems");y.quiComboBox("clearItems");n!=i&&(ui(n,t),nr(t))});v.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=v.quiComboBox("getSelectedItemData");k.quiComboBox("clearItems");n!=i&&t!=i&&wr(n,t)});vr(vt);t("#izvestajiBtnPretrazi").click(tt);t("#izvestajiBtnReset").click(er);t("#detaljiPretrage").click(function(){var n=t(this);n.hasClass("manjaPretraga")?(n.removeClass("manjaPretraga"),t(".nijeDetaljna").show(),t("#izvestajiPodnosilac").css("width","254px"),t("#izvestajiSadrzaj").css("width","250px"),n.attr("title",qKonverzija.VratiLokalizovaniTekst("Detaljna pretraga")),ht=510,t("#izvestajiAnalitikaSlickGrid").css("height","100vh").css("height","-="+ht+"px"),t("#izvestajiSintetikaSlickGrid").css("height","100vh").css("height","-="+ht+"px")):(n.addClass("manjaPretraga"),t(".nijeDetaljna").hide(),t("#izvestajiPodnosilac").css("width","1043px"),t("#izvestajiSadrzaj").css("width","1039px"),n.attr("title",qKonverzija.VratiLokalizovaniTekst("Opšta pretraga")),ht=370,t("#izvestajiAnalitikaSlickGrid").css("height","100vh").css("height","-="+ht+"px"),t("#izvestajiSintetikaSlickGrid").css("height","100vh").css("height","-="+ht+"px"))});t("#izvestajiBtnStampa").click(cr);t(window).on("resize.slickgrid",function(){f!=i&&f.resizeCanvas();u!=i&&(u.resizeCanvas(),t(".slick-header-columns.ui-sortable:eq(0)").find(".qTabelaHeadTd").each(function(n){t(".slick-footer-columns:eq(0)").find(".qTabelaHeadTd:eq("+n+")").width(t(this).width())}))})}})(window.qIzvestaji=window.qIzvestaji||{},jQuery),function(n,t,i){function tt(n){var t,f,u;for(t in e)if(t!==i&&e[t]!==""){if((u=r.getColumns()[r.getColumnIndex(t)],n[u.field]==i)||!n[u.field].toLowerCase().contains(e[t].toLowerCase())||(f=0,t==6&&(f=1),u=r.getColumns()[r.getColumnIndex(t)],n[u.field]==i))return!1;if(f==0){if(!n[u.field].toLowerCase().contains(e[t].toLowerCase()))return!1}else if(f==1&&!qUtils.IzvuciDatumIzDataSaServera(n[u.field]).contains(e[t].toLowerCase()))return!1}return!0}function it(n,t,r,u,f){return f.IdPredmeta!=i?'<i class="fa fa-reply link" data-id="'+f.IdPredmeta+'"><\/i>':""}function rt(n,t,r,u,f){return f.IdPredmeta!=i?'<div class="qTdPopupPredmeti" data-idPredmeta="'+f.IdPredmeta+'">'+nonull(r)+"<\/div>":""}function w(n,t,i){return nonull(i)}function ut(n){return n+1}function ft(n,t,i){return qUtils.IzvuciDatumIzDataSaServera(i)}function et(){f.Okruzi&&f.Okruzi.length>1&&o.quiComboBox("clearSelection");s.quiComboBox("clearSelection");h.quiComboBox("clearSelection");l.quiComboBox("selectItemByData",y.getFullYear());v.val("");c.quiComboBox("clearSelection");t("#predmetiSaRokomNemaRez").hide();t("#predmetiSaRokomSlickGrid").empty();t("#predmetiSaRokomSlickGridPager").empty();e={};r=i}function ot(){var n=t("#predmetiSaRokomBtnPretrazi").find("table");if(!n.hasClass("teloDugmeIskljuceno")){r=i;t("#predmetiSaRokomSlickGrid").empty();t("#predmetiSaRokomSlickGridPager").empty();var e=s.quiComboBox("getSelectedItemData"),u=h.quiComboBox("getSelectedItemData"),a=i,f=c.quiComboBox("getSelectedItemData"),y=i;e==i&&(a=u,u=i,y=f,f=i);n.addClass("teloDugmeIskljuceno");t.ajax({type:"GET",url:d,data:{idOkruga:o.quiComboBox("getSelectedItemData"),idOrgana:e,idKlase:u,brojPredmeta:v.val().trimnull(),godina:l.quiComboBox("getSelectedItemData"),idJedinice:f,oznakaKlase:a,oznakaJedinice:y},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var i=n.Data;i&&i.length>0?(st(i),t("#predmetiSaRokomNemaRez").hide()):t("#predmetiSaRokomNemaRez").show()},complete:function(){n.removeClass("teloDugmeIskljuceno")}})}}function st(n){var o,f,c,s,h,l,a;for(e={},o=[],f=0;f<n.length;++f)c=n[f],s=t.extend({},c),s.id=f,o.push(s);h=[{field:"IdPredmeta",name:"",id:0,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:it,customPolje:!0},{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:1,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ut},{field:"SifraPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Šifra predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:rt},{field:"DatumRoka",name:qKonverzija.VratiLokalizovaniTekst("Rok"),id:6,width:90,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ft},{field:"Podnosilac",name:qKonverzija.VratiLokalizovaniTekst("Podnosilac"),id:3,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"NazivInspektora",name:qKonverzija.VratiLokalizovaniTekst("Inspektor"),id:4,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"Sadrzaj",name:qKonverzija.VratiLokalizovaniTekst("Sadržaj"),id:5,width:310,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w}];u=new Slick.Data.DataView;r=new Slick.Grid("#predmetiSaRokomSlickGrid",u,h,nt);r.setSelectionModel(new Slick.RowSelectionModel);l=new Slick.Controls.Pager(u,r,t("#predmetiSaRokomSlickGridPager"));a=new Slick.Controls.ColumnPicker(h,r,nt);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render()});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(e[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0&&i.column.id!=1){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(e[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});r.onSort.subscribe(function(n,t){var r=function(n,r){var l=t.sortCol.field,e=t.sortAsc?1:-1,u=n[l],f=r[l],s,a,o,h,c;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=0,a=t.sortCol.id,a==6&&(s=1),s==1?o=(u==f?0:u>f?1:-1)*e:(h=u.toLowerCase(),c=f.toLowerCase(),o=(h==c?0:h>c?1:-1)*e),o!=0?o:void 0)};u.sort(r)});r.onClick.subscribe(function(n,i){var u=i.row;if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var f=r.getDataItem(u),e="&idPredmeta="+f.IdPredmeta+"&close=true",o="#./Predmeti?tipDokumenta=3"+e;window.open(location.origin+o,"_blank")}});r.init();u.beginUpdate();u.setItems(o);u.setFilter(tt);u.endUpdate()}function ht(n,r){t.ajax({type:"GET",url:k,data:{idOkruga:n,idOrgana:r},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;t!=i&&(t.Klase&&t.Klase.length>0&&h.quiComboBox("setItemsFromBinding",t.Klase,"Naziv","IdElementa"),t.Jedinice&&t.Jedinice.length>0&&c.quiComboBox("setItemsFromBinding",t.Jedinice,"Naziv","IdElementa"))},complete:function(){}})}function ct(){var i=t("#predmetiSaRokomBtnStampa").find("table"),n,r;i.hasClass("teloDugmeIskljuceno")||(i.addClass("teloDugmeIskljuceno"),n=lt(),n&&n.length>0&&(r={stavkeJ:JSON.stringify(n)},qStampa.PrikaziDijalogStampe(g,r,!1,!1,"POST")),i.removeClass("teloDugmeIskljuceno"))}function lt(){var f,e,t;if(r==i||u==i)return i;for(f=[],e=u.getItems(),t=0;t<e.length;++t){var n=e[t],o=qUtils.IzvuciDateObjIzDataSaServera(n.DatumRoka),s=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),0,0)).toJSON(),h={IdPredmeta:n.IdPredmeta,Podnosilac:n.Podnosilac,NazivInspektora:n.NazivInspektora,Sadrzaj:n.Sadrzaj,SifraPredmeta:n.SifraPredmeta,DatumRoka:s};f.push(h)}return f}var f,o,s,h,l,c,v,y,p=150,b=100,a=300,k,d,g,e={},r,u,nt={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f=qUtils.IzvuciVM("#vm",!0);y=new Date;e={};r=i;k=t("#url_VratiKlaseJedinice").text();d=t("#url_VratiPredmeteSaRokom").text();g=t("#url_VratiStampePredmetaSaRokom").text();o=t("#predmetiSaRokomOkruzi");s=t("#predmetiSaRokomOrgani");h=t("#predmetiSaRokomKlase");v=t("#predmetiSaRokomPredmet");l=t("#predmetiSaRokomGodine");c=t("#predmetiSaRokomJedinice");o.quiComboBox({listWidth:a,width:p,showX:!0});o.quiComboBox("setItemsFromBinding",f.Okruzi,"Naziv","IdElementa");f.Okruzi&&f.Okruzi.length==1&&(o.quiComboBox("selectItemByIndex",0),o.quiComboBox("enable",!1));s.quiComboBox({listWidth:a,width:p,showX:!0});s.quiComboBox("setItemsFromBinding",f.Organi,"Naziv","IdElementa");h.quiComboBox({listWidth:a,width:p,showX:!0});h.quiComboBox("setItemsFromBinding",f.Klase,"Naziv","IdElementa");l.quiComboBox({listWidth:a,width:b,showX:!0});l.quiComboBox("setItemsFromBinding",f.Godine,"Naziv","IdElementa");l.quiComboBox("selectItemByData",y.getFullYear());c.quiComboBox({listWidth:a,width:b,showX:!0});c.quiComboBox("setItemsFromBinding",f.Jedinice,"Naziv","IdElementa");s.on("select",function(){var n=o.quiComboBox("getSelectedItemData"),t=s.quiComboBox("getSelectedItemData");h.quiComboBox("clearItems");c.quiComboBox("clearItems");n!=i&&ht(n,t)});t("#predmetiSaRokomBtnReset").click(et);t("#predmetiSaRokomBtnPretrazi").click(ot);t("#predmetiSaRokomBtnStampa").click(ct);t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}}(window.qPredmetiSaRokom=window.qPredmetiSaRokom||{},jQuery),function(n,t,i){function ft(n){var t,u,f;for(t in h)if(t!==i&&h[t]!==""){if(u=0,t==2&&(u=2),f=r.getColumns()[r.getColumnIndex(t)],n[f.field]==i)return!1;if(u==0){if(!n[f.field].toLowerCase().contains(h[t].toLowerCase()))return!1}else if(u==2&&n[f.field]!=h[t].toDecimal())return!1}return!0}function ut(n,t,i){return nonull(i)}function et(n){return n+1}function ot(){f.Okruzi&&f.Okruzi.length>1&&e.quiComboBox("clearSelection");s.quiComboBox("clearSelection");o.quiComboBox("clearSelection");y.quiComboBox("clearSelection");l.quiComboBox("selectItemByData",b);w.val("");c.quiComboBox("clearSelection");t("#izvPoRazSlickGrid").empty();t("#izvPoRazSlickGridPager").empty();a.quiDate("setSpecialDate","firstDayOfYear");v.quiDate("setDate",new Date);h={};r=i}function st(){var n=t("#pretragaBtnPretrazi").find("table");if(!n.hasClass("teloDugmeIskljuceno")){r=i;t("#izvPoRazSlickGrid").empty();t("#izvPoRazSlickGridPager").empty();var h=s.quiComboBox("getSelectedItemData"),u=o.quiComboBox("getSelectedItemData"),p=i,f=c.quiComboBox("getSelectedItemData"),b=i;h==i&&(p=u,u=i,b=f,f=i);n.addClass("teloDugmeIskljuceno");t.ajax({type:"GET",url:tt,data:{idOkruga:e.quiComboBox("getSelectedItemData"),idOrgana:h,idKlase:u,brojPredmeta:w.val().trimnull(),godina:l.quiComboBox("getSelectedItemData"),idJedinice:f,odDatumaJ:a.quiDate("getJSONDateNoTZStringify"),doDatumaJ:v.quiDate("getJSONDateNoTZStringify"),idArhivatora:y.quiComboBox("getSelectedItemData"),oznakaKlase:p,oznakaJedinice:b},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;ht(t)},complete:function(){n.removeClass("teloDugmeIskljuceno")}})}}function ht(n){var e,f,c,o,s,l,a;for(h={},e=[],f=0;f<n.length;++f)c=n[f],o=t.extend({},c),o.id=f,e.push(o);s=[{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:0,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:et},{field:"RazvodjenjeAkata",name:qKonverzija.VratiLokalizovaniTekst("Razvođenje akata"),id:1,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ut},{field:"BrojPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Broj predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ut}];u=new Slick.Data.DataView;r=new Slick.Grid("#izvPoRazSlickGrid",u,s,rt);r.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow:!1}));l=new Slick.Controls.Pager(u,r,t("#izvPoRazSlickGridPager"));a=new Slick.Controls.ColumnPicker(s,r,rt);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render();r.setSelectedRows([])});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(h[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(h[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});r.onSort.subscribe(function(n,t){var r=function(n,r){var l=t.sortCol.field,e=t.sortAsc?1:-1,u=n[l],f=r[l],s,a,o,h,c;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=1,a=t.sortCol.id,a==1&&(s=0),s==1?o=(u==f?0:u>f?1:-1)*e:(h=u.toLowerCase(),c=f.toLowerCase(),o=(h==c?0:h>c?1:-1)*e),o!=0?o:void 0)};u.sort(r)});r.onClick.subscribe(function(n,i){var u=i.row;if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var f=r.getDataItem(u),e="&idPredmeta="+f.IdPredmeta+"&close=true",o="#./Predmeti?tipDokumenta=3"+e;window.open(location.origin+o,"_blank")}});r.init();u.beginUpdate();u.setItems(e);u.setFilter(ft);u.endUpdate()}function ct(){var n=t("#izvPoRazBtnStampa").find("table"),d;if(!n.hasClass("teloDugmeIskljuceno")){if(r==i||u==i){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),qKonverzija.VratiLokalizovaniTekst("Nema pretraženih predmeta."),"greska");return}n.addClass("teloDugmeIskljuceno");var p=s.quiComboBox("getSelectedItemData"),f=o.quiComboBox("getSelectedItemData"),b=i,h=c.quiComboBox("getSelectedItemData"),k=i;p==i&&(b=f,f=i,k=h,h=i);d={idOkruga:e.quiComboBox("getSelectedItemData"),idOrgana:p,idKlase:f,brojPredmeta:w.val().trimnull(),godina:l.quiComboBox("getSelectedItemData"),idJedinice:h,odDatumaJ:a.quiDate("getJSONDateNoTZStringify"),doDatumaJ:v.quiDate("getJSONDateNoTZStringify"),idArhivatora:y.quiComboBox("getSelectedItemData"),oznakaKlase:b,oznakaJedinice:k};qStampa.PrikaziDijalogStampe(it,d,!1,!1,"GET");n.removeClass("teloDugmeIskljuceno")}}function lt(n,r){t.ajax({type:"GET",url:g,data:{idOkruga:n,idOrgana:r},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;t!=i&&(t.Klase&&t.Klase.length>0&&o.quiComboBox("setItemsFromBinding",t.Klase,"Naziv","IdElementa"),t.Jedinice&&t.Jedinice.length>0&&c.quiComboBox("setItemsFromBinding",t.Jedinice,"Naziv","IdElementa"))},complete:function(){}})}function at(n,i){t.ajax({type:"GET",url:nt,data:{idOkruga:n,idOrgana:i},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}o.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}var f,e,s,o,l,w,c,b,a,v,y,k=150,d=100,p=300,g,nt,tt,it,h={},r,u,rt={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f=qUtils.IzvuciVM("#vm",!0);h={};r=i;u=i;b=t("#tekucaGodina").text().trimnull();g=t("#url_VratiKlaseJedinice").text();nt=t("#url_VratiKlase").text();tt=t("#url_VratiPredmetePoRazvodjenju").text();it=t("#url_VratiStampePredmetaPoRazvodjenju").text();e=t("#izvPoRazOkruzi");s=t("#izvPoRazOrgani");o=t("#izvPoRazKlase");l=t("#izvPoRazGodine");w=t("#izvPoRazPredmet");c=t("#izvPoRazJedinice");a=t("#izvPoRazOdDatuma");v=t("#izvPoRazDoDatuma");y=t("#izvPoRazArhivatori");e.quiComboBox({listWidth:p,width:k,showX:!0});e.quiComboBox("setItemsFromBinding",f.Okruzi,"Naziv","IdElementa");f.Okruzi&&f.Okruzi.length==1&&(e.quiComboBox("selectItemByIndex",0),e.quiComboBox("enable",!1));s.quiComboBox({listWidth:p,width:k,showX:!0});s.quiComboBox("setItemsFromBinding",f.Organi,"Naziv","IdElementa");o.quiComboBox({listWidth:p,width:k,showX:!0});o.quiComboBox("setItemsFromBinding",f.Klase,"Naziv","IdElementa");l.quiComboBox({listWidth:p,width:d,showX:!0});l.quiComboBox("setItemsFromBinding",f.Godine,"Naziv","IdElementa");l.quiComboBox("selectItemByData",b);c.quiComboBox({listWidth:p,width:d,showX:!0});c.quiComboBox("setItemsFromBinding",f.Jedinice,"Naziv","IdElementa");y.quiComboBox({listWidth:p,width:245,showX:!0});y.quiComboBox("setItemsFromBinding",f.Arhivatori,"Naziv","IdElementa");a.quiDate({width:160,showX:!1});a.quiDate("setSpecialDate","firstDayOfYear");v.quiDate({width:160,showX:!1});v.quiDate("setDate",new Date);e.on("select",function(){var n=e.quiComboBox("getSelectedItemData"),t=s.quiComboBox("getSelectedItemData");o.quiComboBox("clearItems");n!=i&&t!=i&&at(n,t)});s.on("select",function(){var n=e.quiComboBox("getSelectedItemData"),t=s.quiComboBox("getSelectedItemData");o.quiComboBox("clearItems");c.quiComboBox("clearItems");n!=i&&lt(n,t)});t("#izvPoRazBtnPretrazi").click(st);t("#izvPoRazBtnReset").click(ot);t("#izvPoRazBtnStampa").click(ct);t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}}(window.qIzvestajPoRazvodjenju=window.qTest||{},jQuery),function(n,t,i){function l(n){var t,u,e;for(t in f)if(t!==i&&f[t]!==""){if(u=0,t==6&&(u=2),e=r.getColumns()[r.getColumnIndex(t)],n[e.field]==i)return!1;if(u==0){if(!n[e.field].toLowerCase().contains(f[t].toLowerCase()))return!1}else if(u==2&&n[e.field]!=f[t].toDecimal())return!1}return!0}function a(){e.quiDate("setSpecialDate","firstDayOfYear");o.quiDate("setDate",new Date);u.beginUpdate();u.setItems([]);u.endUpdate();f={};r=i}function v(){var n=t("#izvPoOpsBtnPretrazi").find("table");n.hasClass("teloDugmeIskljuceno")||(r=i,t("#izvPoOpsSlickGrid").empty(),t("#izvPoOpsSlickGridPager").empty(),n.addClass("teloDugmeIskljuceno"),t.ajax({type:"GET",url:s,data:{odDatumaJ:e.quiDate("getJSONDateNoTZStringify"),doDatumaJ:o.quiDate("getJSONDateNoTZStringify")},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;y(t)},complete:function(){n.removeClass("teloDugmeIskljuceno")}}))}function y(n){var s,o,a,e,h,v,y;for(f={},s=[],o=0;o<n.length;++o)a=n[o],e=t.extend({},a),e.id=o,e.NazivJedinice=e.Jedinica+"-"+e.NazivJedinice,e.NazivKlase=e.Klasa+"-"+e.NazivKlase,e.NazivOrgana=e.Organ+"-"+e.NazivOrgana,e.NazivVrstePredmeta=e.VrstaPredmeta+"-"+e.NazivVrstePredmeta,s.push(e);h=[{field:"PostanskiBrojOpstine",name:qKonverzija.VratiLokalizovaniTekst("Poštanski broj"),id:0,width:100,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"NazivOpstine",name:qKonverzija.VratiLokalizovaniTekst("Opština"),id:1,width:100,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"NazivOrgana",name:qKonverzija.VratiLokalizovaniTekst("Organ"),id:2,width:200,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"NazivKlase",name:qKonverzija.VratiLokalizovaniTekst("Klasa"),id:3,width:200,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"NazivJedinice",name:qKonverzija.VratiLokalizovaniTekst("Jedinica"),id:4,width:200,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"BrojPredmeta0",name:qKonverzija.VratiLokalizovaniTekst("Vrsta predmeta 0"),id:7,width:120,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"BrojPredmeta2",name:qKonverzija.VratiLokalizovaniTekst("Vrsta predmeta 2"),id:8,width:120,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"BrojPredmeta3",name:qKonverzija.VratiLokalizovaniTekst("Vrsta predmeta 3"),id:9,width:120,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"BrojPredmetaO",name:qKonverzija.VratiLokalizovaniTekst("Ostale vrste"),id:10,width:120,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"},{field:"BrojPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Broj predmeta"),id:6,width:100,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd"}];u=new Slick.Data.DataView;r=new Slick.Grid("#izvPoOpsSlickGrid",u,h,c);r.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow:!1}));v=new Slick.Controls.Pager(u,r,t("#izvPoOpsSlickGridPager"));y=new Slick.Controls.ColumnPicker(h,r,c);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render();r.setSelectedRows([])});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(f[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){t(i.node).empty();var r=t("<input type='text'>");r.data("columnId",i.column.id).val(f[i.column.id]);r.appendTo(i.node)});r.onSort.subscribe(function(n,t){var r=function(n,r){var a=t.sortCol.field,o=t.sortAsc?1:-1,u=n[a],f=r[a],h,e,s,c,l;return u!=i&&f==i?1*o:u==i&&f!=i?-1*o:u==i&&f==i?0:(h=0,e=t.sortCol.id,(e==6||e==7||e==8||e==9||e==10)&&(h=1),h==1?s=(u==f?0:u>f?1:-1)*o:(c=u.toLowerCase(),l=f.toLowerCase(),s=(c==l?0:c>l?1:-1)*o),s!=0?s:void 0)};u.sort(r)});r.init();u.beginUpdate();u.setItems(s);u.setFilter(l);u.endUpdate()}function p(){var n=t("#izvPoRazBtnStampa").find("table"),f;if(!n.hasClass("teloDugmeIskljuceno")){if(r==i||u==i){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),qKonverzija.VratiLokalizovaniTekst("Nema pretraženih predmeta."),"greska");return}n.addClass("teloDugmeIskljuceno");f={odDatumaJ:e.quiDate("getJSONDateNoTZStringify"),doDatumaJ:o.quiDate("getJSONDateNoTZStringify")};qStampa.PrikaziDijalogStampe(h,f,!1,!1,"GET");n.removeClass("teloDugmeIskljuceno")}}var e,o,s,h,f={},r,u,c={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f={};r=i;u=i;s=t("#url_VratiPredmetePoOpstinama").text();h=t("#url_VratiStampePredmetaPoOpstinama").text();e=t("#izvPoOpsOdDatuma");o=t("#izvPoOpsDoDatuma");e.quiDate({width:300,showX:!1});e.quiDate("setSpecialDate","firstDayOfYear");o.quiDate({width:300,showX:!1});o.quiDate("setDate",new Date);t("#izvPoOpsBtnPretrazi").click(v);t("#izvPoOpsBtnReset").click(a);t("#izvPoOpsBtnStampa").click(p);t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}}(window.qIzvestajPoOpstinama=window.qIzvestajPoOpstinama||{},jQuery);