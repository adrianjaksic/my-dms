(function(n,t,i){function pi(n){var t,u;for(t in p)if(t!==i&&p[t]!==""&&((u=r.getColumns()[r.getColumnIndex(t)],n[u.field]==i)||!n[u.field].toLowerCase().contains(p[t].toLowerCase())))return!1;return!0}function wi(n,t,r,u,f){return f.IdPredmeta!=i?'<i class="fa fa-reply link" data-id="'+f.IdPredmeta+'"><\/i>':""}function bi(n,t,r,u,f){return f.IdPredmeta!=i?'<div class="qTdPopupPredmeti" data-idPredmeta="'+f.IdPredmeta+'">'+nonull(r)+"<\/div>":""}function ot(n,t,i){return'<div title="'+nonull(i)+'">'+nonull(i)+"<\/div>"}function ki(n,t,i,r,u){return'<i class="fa fa-remove x" data-id="'+u.IdPredmeta+'"><\/i>'}function di(n){return n+1}function gi(){f.Okruzi&&f.Okruzi.length>1&&s.quiComboBox("clearSelection");a.quiComboBox("clearSelection");c.quiComboBox("clearSelection");b.quiComboBox("clearSelection");v.quiComboBox("clearSelection");d.quiComboBox("selectItemByData",wt);st.val("");w.quiComboBox("clearSelection");nt.quiDate("clearDate");tt.quiDate("clearDate");kt.find('input[value="0"]').prop("checked",!0);y.quiComboBox("clearSelection");ht.val("");ct.val("");lt.val("");it.quiComboBox("clearSelection");et.val("");rt.quiComboBox("clearSelection");at.val("");ut.quiDate("clearDate");ft.quiComboBox("clearSelection");vt.val("");g.quiComboBox("clearSelection");yt.find('input[value="0"]').prop("checked",!0);t("#pretragaNemaRez").hide();t("#pretragaBtnBrisanje").hide();t("#pretragaBtnArhiviranje").hide();e==2&&y.quiComboBox("selectItemByIndex",0);t("#pretragaPredmetiSlickGrid").empty();t("#pretragaPredmetiSlickGridPager").empty();p={};r=i}function li(n,r,f){var e,h,c,s,o;if(n)e='<div class="unosRed">\t                        <div class="unosRedLbl_taL" style="width: 100px;">'+qKonverzija.VratiLokalizovaniTekst("Šifra")+':<\/div>\t                        <div class="unosRedVr"><div class="unosRedLbl_taL" style="width: 200px;">'+f.SifraPredmeta+':<\/div><\/div>                        <\/div>                        <div class="unosRed">\t                        <div class="unosRedLbl_taL" style="width: 100px;">'+qKonverzija.VratiLokalizovaniTekst("Podnosilac")+':<\/div>\t                        <div class="unosRedVr"><div class="unosRedLbl_taL" style="width: 200px;">'+nonull(f.Podnosilac)+'<\/div><\/div>                        <\/div>                        <div class="unosRed">\t                        <div class="unosRedLbl_taL" style="width: 100px;">'+qKonverzija.VratiLokalizovaniTekst("Inspektor")+':<\/div>\t                        <div class="unosRedVr"><div class="unosRedLbl_taL" style="width: 200px;">'+nonull(f.NazivInspektora)+'<\/div><\/div>                        <\/div>                        <div class="unosRed">\t                        <div class="unosRedLbl_taL" style="width: 100px;">'+qKonverzija.VratiLokalizovaniTekst("Sadržaj")+':<\/div>\t                        <div class="unosRedVr"><div class="unosRedLbl_taL" style="width: 200px;">'+nonull(f.Sadrzaj)+"<\/div><\/div>                        <\/div>                        <br><div>                            <div>"+qKonverzija.VratiLokalizovaniTekst("Unesite razlog brisanja dokumenta")+':<\/div>                            <div class="unosRed">                                <div class="unosRedVr" style="width: 90%; margin-left: 5%; margin-right: 5%;"><input class="myInput" style="width: 100%;" id="predmetiPretragaRazlogBrisanja"/><\/div>                            <\/div>                        <\/div>',PrikaziProzor2(!0,!0,qKonverzija.VratiLokalizovaniTekst("UPOZORENJE"),qKonverzija.VratiLokalizovaniTekst("U procesu ste brisanja predmeta!")+"<br><br>"+e,"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Obriši"),callback:function(){var n=t("#predmetiPretragaRazlogBrisanja"),e=n.val().trimnull(),r,o;if(e==i){qUtils.BlinkiBGColorElementa(n,"red",null,"white");n.focus();return}r=[];r.push(f.IdPredmeta);o=f.id;t.ajax({type:"POST",url:bt,data:{predmetiJ:JSON.stringify(r),razlogBrisanja:e},success:function(n){if(n.Greska){PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}u.deleteItem(o);PrikaziProzor2(!1)},complete:function(){}})}},{labela:qKonverzija.VratiLokalizovaniTekst("Odustani"),callback:function(){PrikaziProzor2(!1)}}]);else{for(e="<table>                        <tbody>",h=[],c=[],s=0;s<r.length;s++)o=r[s],h.push(o.IdPredmeta),c.push(o.id),e+='<tr>                            <td class="qTdPopupPredmeti" data-idPredmeta="'+o.IdPredmeta+'">'+o.SifraPredmeta+"<\/td>                        <\/tr>";e+="<\/tbody>                    <\/table>";PrikaziProzor2(!0,!0,qKonverzija.VratiLokalizovaniTekst("UPOZORENJE"),qKonverzija.VratiLokalizovaniTekst("U procesu ste brisanja sledećih predmeta:")+"<br><br>"+e,"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Obriši predmete"),callback:function(){nr(h,c)}},{labela:qKonverzija.VratiLokalizovaniTekst("Odustani"),callback:function(){PrikaziProzor2(!1)}}])}}function nr(n,r){var f="<div>                        <div>"+qKonverzija.VratiLokalizovaniTekst("Unesite razlog brisanja dokumenta")+':<\/div>                        <div class="unosRed">                            <div class="unosRedVr" style="width: 90%; margin-left: 5%; margin-right: 5%;"><input class="myInput" style="width: 100%;" id="predmetiPretragaRazlogBrisanja"/><\/div>                        <\/div>                    <\/div>';PrikaziProzor2(!0,!1,qKonverzija.VratiLokalizovaniTekst("BRISANJE PREDMETA"),f,"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Obriši"),callback:function(){var f=t("#predmetiPretragaRazlogBrisanja"),e=f.val().trimnull();if(e==i){qUtils.BlinkiBGColorElementa(f,"red",null,"white");f.focus();return}PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("OBAVEŠTENJE"),qKonverzija.VratiLokalizovaniTekst("Brisanje predmeta u toku...")+'<br><br><img src="'+_pathImg+'loadProgress2.gif" alt="" />',"ucitavanje");t.ajax({type:"POST",url:bt,data:{predmetiJ:JSON.stringify(n),razlogBrisanja:e},success:function(n){var t,i;if(n.Greska){PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}for(t=0;t<r.length;++t)i=r[t],u.deleteItem(i);PrikaziProzor(!1)},complete:function(){}})}},{labela:qKonverzija.VratiLokalizovaniTekst("Zatvori"),callback:function(){PrikaziProzor2(!1)}}])}function tr(n,i){var f=t("#pretragaBtnArhiviranje").find("table"),u,r;if(!f.hasClass("teloDugmeIskljuceno")){f.addClass("teloDugmeIskljuceno");var e="<table>                        <tbody>",o=[],s=[];for(u=0;u<n.length;u++)r=n[u],o.push(r.IdPredmeta),s.push(r.id),e+='<tr>                            <td class="qTdPopupPredmeti" data-idPredmeta="'+r.IdPredmeta+'">'+r.SifraPredmeta+"<\/td>                        <\/tr>";e+="<\/tbody>                    <\/table>";PrikaziProzor2(!0,!0,qKonverzija.VratiLokalizovaniTekst("UPOZORENJE"),qKonverzija.VratiLokalizovaniTekst("U procesu ste arhiviranja sledećih predmeta:")+"<br><br>"+e,"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Arhiviraj predmete"),callback:function(){ir(o,s,i)}},{labela:qKonverzija.VratiLokalizovaniTekst("Odustani"),callback:function(){PrikaziProzor2(!1);f.removeClass("teloDugmeIskljuceno")}}])}}function ir(n,r,e){var o='<div style="height: auto;">                        <div>'+qKonverzija.VratiLokalizovaniTekst("Unesite razvođenje akata")+':<\/div>                        <div class="unosRed">                            <div class="unosRedVr" style="margin-left: 15px; text-align: left;"><div id="predmetiPretragaRazvodjenjeAkata" style="position: absolute;"><\/div><\/div>                        <\/div><br>                        <div class="unosRed">\t                        <div class="unosRedLbl_taL" style="width: 100px; margin-left: 15px;">'+qKonverzija.VratiLokalizovaniTekst("Rok čuvanja")+':<\/div>\t                        <div class="unosRedVr"><input style="width: 245px;" class="myInput" id="predmetiPretragaRazvodjenjeAkataNapomena" /><\/div>                        <\/div>                    <\/div>';PrikaziProzor2(!0,!1,qKonverzija.VratiLokalizovaniTekst("UPOZORENJE"),o,"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Arhiviraj predmete"),callback:function(){var e=t("#predmetiPretragaRazvodjenjeAkata").quiMultiselect("getSelectedItems"),f=t("#predmetiPretragaRazvodjenjeAkataNapomena"),o=f.val().trimnull();if(o==i){qUtils.BlinkiBGColorElementa(f,"red",null,"white");f.focus();return}PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("OBAVEŠTENJE"),qKonverzija.VratiLokalizovaniTekst("Arhiviranje predmeta u toku...")+'<br><br><img src="'+_pathImg+'loadProgress2.gif" alt="" />',"ucitavanje");t.ajax({type:"POST",url:oi,data:{predmetiJ:JSON.stringify(n),aktoviJ:e!=i?JSON.stringify(e):i,napomena:o},success:function(f){var c,e,l,o,a,s;if(f.Greska){PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),f.Poruka,"greska");return}var v="",y="",p="",h=f.Data;if(h!=i&&h.length>0)for(c=0;c<h.length;++c){for(e=h[c],l=-1,o=0;o<n.length;++o)if(n[o]==e.IdPredmeta){l=o;break}if(a=u.getItemById(r[l]),a!=i)e.Arhiviran?a.IdPredmeta==e.IdPredmeta&&(v+='<i class="fa fa-reply link-predmet" data-id="'+e.IdPredmeta+'"><\/i><b style="margin-left: 5px;">'+e.BrojPredmeta+"<\/b><br>",u.deleteItem(r[l])):y+='<i class="fa fa-reply link-predmet" data-id="'+e.IdPredmeta+'"><\/i><b style="color: red; margin-left: 5px;">'+a.SifraPredmeta+'<\/b><i title="'+e.Napomena+'" style="font-size: 1.2em;" class="fa fa-info-circle info-arhiviranja" data-placement="right" data-toggle="tooltip" aria-hidden="true"><\/i><br>';else{var w=e.Arhiviran?qKonverzija.VratiLokalizovaniTekst("Arhiviran: "):qKonverzija.VratiLokalizovaniTekst("Nearhiviran"),b=e.Napomena!=i&&e.Napomena.trimnull()!=i?"\n"+qKonverzija.VratiLokalizovaniTekst("Greška: ")+e.Napomena:"",k=qKonverzija.VratiLokalizovaniTekst("Id predmeta: ")+e.IdPredmeta+"\n"+qKonverzija.VratiLokalizovaniTekst("Status: ")+w+b;p+='<i class="fa fa-reply link-predmet" data-id="'+e.IdPredmeta+'"><\/i><b style="color: red; margin-left: 5px;">'+nonull(e.Broj)+" "+e.IdPredmeta+'<\/b><i style="font-size: 1.2em;" title="'+k+'" class="fa fa-info-circle info-arhiviranja" data-placement="right" data-toggle="tooltip" aria-hidden="true"><\/i><br>'}}s="";v!=""&&(s="<div>"+qKonverzija.VratiLokalizovaniTekst("Lista arhiviranih predmeta")+":<\/div><br>"+v+"<br>");y!=""&&(s+="<div>"+qKonverzija.VratiLokalizovaniTekst("Lista nearhiviranih predmeta")+":<\/div><br>"+y);p!=""&&(s+="<div>"+qKonverzija.VratiLokalizovaniTekst("Lista grešaka")+":<\/div><br>"+p);PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("OBAVEŠTENJE"),s,"difolt");t(".link-predmet").on("click",function(){var n=t(this).attr("data-id"),i="&idPredmeta="+n+"&close=true",r="#./Predmeti?tipDokumenta=3"+i;window.open(location.origin+r,"_blank")});t(".info-arhiviranja").tooltip()},complete:function(){t("#pretragaBtnArhiviranje").find("table").removeClass("teloDugmeIskljuceno")}})}},{labela:qKonverzija.VratiLokalizovaniTekst("Odustani"),callback:function(){PrikaziProzor2(!1);t("#pretragaBtnArhiviranje").find("table").removeClass("teloDugmeIskljuceno")}}]);t("#predmetiPretragaRazvodjenjeAkata").quiMultiselect({width:350,listWidth:350,listHeight:250});e==4?t("#predmetiPretragaRazvodjenjeAkata").quiMultiselect("setItems",f.RazvodjenjeAkata2,"Naziv","Izabran"):t("#predmetiPretragaRazvodjenjeAkata").quiMultiselect("setItems",f.RazvodjenjeAkata,"Naziv","Izabran")}function rr(){var n=t("#pretragaBtnPretrazi").find("table"),u;n.hasClass("teloDugmeIskljuceno")||(u=fr(),r=i,t("#pretragaPredmetiSlickGrid").empty(),t("#pretragaPredmetiSlickGridPager").empty(),n.addClass("teloDugmeIskljuceno"),t.ajax({type:"GET",url:ei,data:{pretragaJ:JSON.stringify(u)},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var i=n.Data;i&&i.length>0?(ur(i),t("#pretragaBtnBrisanje").show(),t("#pretragaBtnArhiviranje").show(),t("#pretragaNemaRez").hide()):(t("#pretragaNemaRez").show(),t("#pretragaBtnBrisanje").hide(),t("#pretragaBtnArhiviranje").hide())},complete:function(){n.removeClass("teloDugmeIskljuceno")}}))}function ur(n){var c,o,y,a,f,v,s,h,w,b;for(p={},c=[],o=0;o<n.length;++o)y=n[o],a=t.extend({},y),a.id=o,c.push(a);f=[];(e==4||e==3&&l)&&(v=new Slick.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel qTabelaTd tac",columnId:-1,headerCssClass:"qTabelaHeadTd",toolTip:qKonverzija.VratiLokalizovaniTekst("Selektuj sve")}),s=v.getColumnDefinition(),s.headerCssClass="qTabelaHeadTd tac",s.customPolje=!0,f.push(s));h=265;e==4?h=230:e==3&&l&&(h=200);f.push({field:"IdPredmeta",name:"",id:0,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:wi,customPolje:!0},{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:1,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:di},{field:"SifraPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Šifra predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:bi},{field:"Podnosilac",name:qKonverzija.VratiLokalizovaniTekst("Podnosilac"),id:3,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ot},{field:"NazivInspektora",name:qKonverzija.VratiLokalizovaniTekst("Inspektor"),id:4,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ot},{field:"Sadrzaj",name:qKonverzija.VratiLokalizovaniTekst("Sadržaj"),id:5,width:h,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ot},{field:"LiceKontrole",name:qKonverzija.VratiLokalizovaniTekst("Lice kontrole"),id:7,width:160,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ot});e==3&&l&&f.push({field:"IdPredmeta",name:"",id:6,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:ki});u=new Slick.Data.DataView;r=new Slick.Grid("#pretragaPredmetiSlickGrid",u,f,ci);r.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow:!1}));w=new Slick.Controls.Pager(u,r,t("#pretragaPredmetiSlickGridPager"));(e==4||e==3&&l)&&r.registerPlugin(v);b=new Slick.Controls.ColumnPicker(f,r,ci);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render();r.setSelectedRows([])});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(p[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0&&i.column.id!=-1&&i.column.id!=6&&i.column.id!=1){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(p[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});r.onSort.subscribe(function(n,t){var r=function(n,r){var c=t.sortCol.field,e=t.sortAsc?1:-1,u=n[c],f=r[c],o,s,h;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=u.toLowerCase(),h=f.toLowerCase(),o=(s==h?0:s>h?1:-1)*e,o!=0)?o:0};u.sort(r)});r.onClick.subscribe(function(n,u){var f=u.row,o;if(e==3&&l&&n.target.className=="fa fa-remove x")n.stopImmediatePropagation(),o=r.getDataItem(f),li(!0,i,o);else if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var s=r.getDataItem(f),h="&idPredmeta="+s.IdPredmeta+"&close=true",c="#./Predmeti?tipDokumenta=3"+h;window.open(location.origin+c,"_blank")}});r.init();u.beginUpdate();u.setItems(c);u.setFilter(pi);u.endUpdate()}function fr(){var f=a.quiComboBox("getSelectedItemData"),r=v.quiComboBox("getSelectedItemData"),e=gt.val().trimnull(),u=w.quiComboBox("getSelectedItemData"),o=ni.val().trimnull(),n;return f==i&&(r!=i&&(e=r,r=i),u!=i&&(o=u,u=i)),n=t("#pretragaRokCuvanja").val(),n&&(n=n.trimnull()),{IdOkruga:s.quiComboBox("getSelectedItemData"),IdOrgana:f,IdKlase:r,BrojPredmeta:st.val().trimnull(),Godina:d.quiComboBox("getSelectedItemData"),OdDatuma:nt.quiDate("getJSONDateNoTZ"),DoDatuma:tt.quiDate("getJSONDateNoTZ"),IdJedinice:u,Status:y.quiComboBox("getSelectedItemData"),IdVrstePredmeta:it.quiComboBox("getSelectedItemData"),IdInspektora:g.quiComboBox("getSelectedItemData"),Podnosilac:ht.val().trimnull(),LiceKontrole:ct.val().trimnull(),Sadrzaj:lt.val().trimnull(),IdTakse:rt.quiComboBox("getSelectedItemData"),StraniBroj:at.val().trimnull(),Rok:et.val().trimnull(),PreRoka:t("#pretragaRokRadioWrap").find("input:eq(0)").prop("checked"),DatumKretanja:ut.quiDate("getJSONDateNoTZ"),IdKretanjaPredmeta:ft.quiComboBox("getSelectedItemData"),OpisKretanja:vt.val().trimnull(),IdOpstine:c.quiComboBox("getSelectedItemData"),OznakaOrgana:dt.val().trimnull(),OznakaKlase:e,OznakaJedinice:o,GledanjeDatumaKreiranja:yt.find("input:eq(0)").prop("checked"),IdMestaOpstine:b.quiComboBox("getSelectedItemData"),RokCuvanja:n}}function er(){var r=t("#pretragaBtnStampa").find("table"),n,u;if(!r.hasClass("teloDugmeIskljuceno")){if(n=or(),n==i){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),qKonverzija.VratiLokalizovaniTekst("Nema pretraženih predmeta."),"greska");return}r.addClass("teloDugmeIskljuceno");n&&n.length>0&&(u={listaPredmetaJ:JSON.stringify(n)},qStampa.PrikaziDijalogStampe(si,u,!1,!1,"POST"));r.removeClass("teloDugmeIskljuceno")}}function or(){var t,f,n,e;if(r==i||u==i)return i;for(t=[],f=u.getItems(),n=0;n<f.length;++n)e=f[n],t.push(e.IdPredmeta);return t}function sr(n){n.css("text-align","right");n.on("click",function(){n.select()});n.on("focus",function(){n.val(n.val()).css("text-align","left")});n.on("blur",function(){var i,t;if(n.css("text-align","right"),i=n.val().trim(),i===""){n.val(i);n.attr("data-val",i);return}if(t=parseInt(i),isNaN(t)||t<0){n.val(n.attr("data-val"));return}if(t==n.attr("data-val")){n.val(t);return}n.val(t);n.attr("data-val",t)});n.on("keypress",function(t){t.keyCode==13&&n.blur()})}function ai(n,i){t.ajax({type:"GET",url:ri,data:{idOkruga:n,idOrgana:i},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}v.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function vi(n){t.ajax({type:"GET",url:ui,data:{idOrgana:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}w.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function yi(n){t.ajax({type:"GET",url:ii,data:{idOkruga:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}c.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function hr(n){t.ajax({type:"GET",url:fi,data:{idOkruga:n},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}g.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}function cr(n,i){t.ajax({type:"GET",url:hi,data:{idOkruga:n,idOpstine:i},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}b.quiComboBox("setItemsFromBinding",n.Data,"Naziv","IdElementa")},complete:function(){}})}var f,e,l,s,a,v,d,st,w,c,b,nt,tt,kt,y,ht,ct,lt,it,et,rt,at,ut,ft,vt,g,dt,gt,ni,yt,pt=150,ti=100,o=254,h=300,wt,ii,ri,ui,fi,bt,ei,oi,si,hi,k=325,p={},r,u,ci={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f=qUtils.IzvuciVM("#vm",!0);p={};r=i;u=i;e=parseInt(t("#tipPretrage").text().trimnull());(e==3||e==4)&&(k=350);l=t("#brisanjePredmeta").text().toLowerCase()=="true";wt=t("#tekucaGodina").text().trimnull();t("#pretragaNaslov").text(t("#meniPretrage").find(".hederMeniDugme.meniDugmeKliknuto .hederMeniDugmeText").text());ii=t("#url_VratiOpstine").text();ri=t("#url_VratiKlase").text();ui=t("#url_VratiJedinice").text();fi=t("#url_VratiInspektoreOkruga").text();bt=t("#url_BrisanjePredmeta").text();ei=t("#url_VratiPredmetePretrage").text();oi=t("#url_ArhiviranjePredmeta").text();si=t("#url_VratiStampePretrazenihPredmeta").text();hi=t("#url_VratiMestaOpstine").text();dt=t("#pretragaOznakaOrgana");gt=t("#pretragaOznakaKlase");ni=t("#pretragaOznakaJedinice");s=t("#pretragaOkruzi");a=t("#pretragaOrgani");v=t("#pretragaKlase");d=t("#pretragaGodine");st=t("#pretragaPredmet");c=t("#pretragaOpstine");b=t("#pretragaMestaOpstine");w=t("#pretragaJedinice");nt=t("#pretragaOdDatuma");tt=t("#pretragaDoDatuma");kt=t("#pretragaRokRadioWrap");y=t("#pretragaStatusi");ht=t("#pretragaPodnosilac");ct=t("#pretragaLiceKontrole");lt=t("#pretragaSadrzaj");it=t("#pretragaVrstePredmeta");et=t("#pretragaRok");rt=t("#pretragaTakse");at=t("#pretragaStraniBroj");g=t("#pretragaInspektori");ut=t("#pretragaDatumKretanja");ft=t("#pretragaVrsteKretanja");vt=t("#pretragaOpisKretanja");yt=t("#pretragaDatumRadioWrap");s.quiComboBox({listWidth:h,width:pt,showX:!0});s.quiComboBox("setItemsFromBinding",f.Okruzi,"Naziv","IdElementa");c.quiComboBox({listWidth:h,width:o,showX:!0});b.quiComboBox({listWidth:h,width:o,showX:!0});f.Okruzi&&f.Okruzi.length==1&&(s.quiComboBox("selectItemByIndex",0),s.quiComboBox("enable",!1),f.Opstine!=i?c.quiComboBox("setItemsFromBinding",f.Opstine,"Naziv","IdElementa"):yi(f.Okruzi[0].IdElementa));a.quiComboBox({listWidth:h,width:pt,showX:!0});a.quiComboBox("setItemsFromBinding",f.Organi,"Naziv","IdElementa");v.quiComboBox({listWidth:h,width:pt,showX:!0});v.quiComboBox("setItemsFromBinding",f.Klase,"Naziv","IdElementa");d.quiComboBox({listWidth:h,width:ti,showX:!0});d.quiComboBox("setItemsFromBinding",f.Godine,"Naziv","IdElementa");d.quiComboBox("selectItemByData",wt);w.quiComboBox({listWidth:h,width:ti,showX:!0});w.quiComboBox("setItemsFromBinding",f.Jedinice,"Naziv","IdElementa");nt.quiDate({width:o,showX:!0});nt.quiDate("clearDate");tt.quiDate({width:o,showX:!0});tt.quiDate("clearDate");y.quiComboBox({listWidth:h,width:o,showX:!0});y.quiComboBox("setItemsFromBinding",f.Statusi,"Naziv","IdElementa");e==2&&y.quiComboBox("selectItemByIndex",0);e==4&&y.quiComboBox("selectItemByData","O");it.quiComboBox({listWidth:h,width:o,showX:!0});it.quiComboBox("setItemsFromBinding",f.VrstePredmeta,"Naziv","IdElementa");rt.quiComboBox({listWidth:h,width:o,showX:!0});rt.quiComboBox("setItemsFromBinding",f.Takse,"Naziv","IdElementa");ut.quiDate({width:o,showX:!0});ut.quiDate("clearDate");ft.quiComboBox({listWidth:o,width:o,showX:!0});ft.quiComboBox("setItemsFromBinding",f.KretanjaPredmeta,"Naziv","IdElementa");g.quiComboBox({listWidth:o,width:o,showX:!0});f.Inspektori&&f.Inspektori.length>0&&g.quiComboBox("setItemsFromBinding",f.Inspektori,"Naziv","IdElementa");s.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=a.quiComboBox("getSelectedItemData");v.quiComboBox("clearItems");c.quiComboBox("clearItems");b.quiComboBox("clearItems");n!=i&&(ai(n,t),vi(t));n!=i&&(hr(n),yi(n))});a.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=a.quiComboBox("getSelectedItemData");v.quiComboBox("clearItems");w.quiComboBox("clearItems");n!=i&&(ai(n,t),vi(t))});c.on("select",function(){var n=s.quiComboBox("getSelectedItemData"),t=c.quiComboBox("getSelectedItemData");b.quiComboBox("clearItems");n!=i&&t!=i&&cr(n,t)});sr(et);t("#pretragaBtnPretrazi").click(rr);t("#pretragaBtnReset").click(gi);t("#detaljiPretrage").click(function(){var n=t(this);n.hasClass("manjaPretraga")?(n.removeClass("manjaPretraga"),t(".nijeDetaljna").show(),t("#pretragaPodnosilac").css("width","254px"),t("#pretragaSadrzaj").css("width","250px"),n.attr("title",qKonverzija.VratiLokalizovaniTekst("Detaljna pretraga")),k=435,(e==4||e==3&&l)&&(k=470),t("#pretragaPredmetiSlickGrid").css("height","100vh").css("height","-="+k+"px")):(n.addClass("manjaPretraga"),t(".nijeDetaljna").hide(),t("#pretragaPodnosilac").css("width","1043px"),t("#pretragaSadrzaj").css("width","1039px"),n.attr("title",qKonverzija.VratiLokalizovaniTekst("Opšta pretraga")),k=325,(e==4||e==3&&l)&&(k=360),t("#pretragaPredmetiSlickGrid").css("height","100vh").css("height","-="+k+"px"))});t("#pretragaBtnStampa").click(er);t("#pretragaBtnBrisanje").click(function(){var e=[],o,s,t,f,n;if(u!=i&&r!=i&&r.getSelectedRows().length>0)for(o=r.getSelectedRows(),s=r.getSelectedRows().length,t=0;t<s;++t)f=u.getItem(o[t]),n={},n.IdPredmeta=f.IdPredmeta,n.SifraPredmeta=f.SifraPredmeta,n.id=f.id,e.push(n);if(e.length==0){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),qKonverzija.VratiLokalizovaniTekst("Nijedan predmet nije izabran za brisanje."),"greska");return}li(!1,e)});t("#pretragaBtnArhiviranje").click(function(){var e=[],t,f,n;if(u!=i&&r!=i&&r.getSelectedRows().length>0){var o=r.getSelectedRows(),c=r.getSelectedRows().length,s=i,h=u.getItem(o[0]);for(s=h!=i?h.IdVrstePredmeta:i,t=0;t<c;++t)f=u.getItem(o[t]),n={},n.IdPredmeta=f.IdPredmeta,n.SifraPredmeta=f.SifraPredmeta,n.id=f.id,e.push(n)}if(e.length==0){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),qKonverzija.VratiLokalizovaniTekst("Nijedan predmet nije izabran za arhiviranje."),"greska");return}tr(e,s)});t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}})(window.qPretragaPredmeta=window.qPretragaPredmeta||{},jQuery),function(n,t,i){function tt(n){var t,u;for(t in s)if(t!==i&&s[t]!==""&&((u=r.getColumns()[r.getColumnIndex(t)],n[u.field]==i)||!n[u.field].toLowerCase().contains(s[t].toLowerCase())))return!1;return!0}function it(n,t,r,u,f){return f.IdPredmeta!=i?'<i class="fa fa-reply link" data-id="'+f.IdPredmeta+'"><\/i>':""}function rt(n,t,r,u,f){return f.IdPredmeta!=i?'<div class="qTdPopupPredmeti" data-idPredmeta="'+f.IdPredmeta+'">'+nonull(r)+"<\/div>":""}function w(n,t,i){return nonull(i)}function ut(n,t,i,r,u){return'<i class="fa fa-unlock-alt aktiviraj" aria-hidden="true" data-id="'+u.IdPredmeta+'"><\/i>'}function ft(n){return n+1}function et(){f.Okruzi&&f.Okruzi.length>1&&e.quiComboBox("clearSelection");o.quiComboBox("clearSelection");h.quiComboBox("clearSelection");l.quiComboBox("selectItemByData",y.getFullYear());v.val("");c.quiComboBox("clearSelection");t("#pretragaObrisanihNemaRez").hide();t("#pretragaObrisanihSlickGrid").empty();t("#pretragaObrisanihSlickGridPager").empty();s={};r=i}function ot(){var n=t("#pretragaObrisanihBtnPretrazi").find("table");if(!n.hasClass("teloDugmeIskljuceno")){r=i;t("#pretragaObrisanihSlickGrid").empty();t("#pretragaObrisanihSlickGridPager").empty();var y=o.quiComboBox("getSelectedItemData"),u=h.quiComboBox("getSelectedItemData"),s=i,f=c.quiComboBox("getSelectedItemData"),a=i;y==i&&(s=u,u=i,a=f,f=i);n.addClass("teloDugmeIskljuceno");t.ajax({type:"GET",url:d,data:{idOkruga:e.quiComboBox("getSelectedItemData"),idOrgana:o.quiComboBox("getSelectedItemData"),idKlase:u,oznakaKlase:s,brojPredmeta:v.val().trimnull(),godina:l.quiComboBox("getSelectedItemData"),idJedinice:f,oznakaJedinice:a},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var i=n.Data;i&&i.length>0?(st(i),t("#pretragaObrisanihNemaRez").hide()):t("#pretragaObrisanihNemaRez").show()},complete:function(){n.removeClass("teloDugmeIskljuceno")}})}}function st(n){var e,f,c,o,h,l,a;for(s={},e=[],f=0;f<n.length;++f)c=n[f],o=t.extend({},c),o.id=f,e.push(o);h=[{field:"IdPredmeta",name:"",id:0,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:it,customPolje:!0},{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:1,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:ft},{field:"SifraPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Šifra predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:rt},{field:"Podnosilac",name:qKonverzija.VratiLokalizovaniTekst("Podnosilac"),id:3,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"NazivInspektora",name:qKonverzija.VratiLokalizovaniTekst("Inspektor"),id:4,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"Sadrzaj",name:qKonverzija.VratiLokalizovaniTekst("Sadržaj"),id:5,width:425,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"IdPredmeta",name:"",id:6,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:ut,customPolje:!0}];u=new Slick.Data.DataView;r=new Slick.Grid("#pretragaObrisanihSlickGrid",u,h,nt);r.setSelectionModel(new Slick.RowSelectionModel);l=new Slick.Controls.Pager(u,r,t("#pretragaObrisanihSlickGridPager"));a=new Slick.Controls.ColumnPicker(h,r,nt);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render()});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(s[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0&&i.column.id!=6&&i.column.id!=1){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(s[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});r.onSort.subscribe(function(n,t){var r=function(n,r){var c=t.sortCol.field,e=t.sortAsc?1:-1,u=n[c],f=r[c],o,s,h;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=u.toLowerCase(),h=f.toLowerCase(),o=(s==h?0:s>h?1:-1)*e,o!=0)?o:0};u.sort(r)});r.onClick.subscribe(function(n,i){var e=i.row,f;if(n.target.className=="fa fa-unlock-alt aktiviraj")n.stopImmediatePropagation(),f=r.getDataItem(e),PrikaziProzor2(!0,!0,qKonverzija.VratiLokalizovaniTekst("UPOZORENJE"),qKonverzija.VratiLokalizovaniTekst("Da li ste sigurni da želite da aktivirate obrisani predmet?"),"upozorenje",[{labela:qKonverzija.VratiLokalizovaniTekst("Aktiviraj predmet"),callback:function(){var n=t(this).find("table");n.hasClass("teloDugmeIskljuceno")||(n.addClass("teloDugmeIskljuceno"),t.ajax({type:"POST",url:g,data:{idPredmeta:f.IdPredmeta},success:function(t){if(t.Greska){n.removeClass("teloDugmeIskljuceno");PrikaziProzor(!0,!1,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),t.Poruka,"greska");return}u.deleteItem(f.id,f.IdPredmeta);n.removeClass("teloDugmeIskljuceno");PrikaziProzor(!1)},complete:function(){}}))}},{labela:qKonverzija.VratiLokalizovaniTekst("Odustani"),callback:function(){PrikaziProzor2(!1)}}]);else if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var o=r.getDataItem(e),s="&idPredmeta="+o.IdPredmeta+"&close=true",h="#./Predmeti?tipDokumenta=3"+s;window.open(location.origin+h,"_blank")}});r.init();u.beginUpdate();u.setItems(e);u.setFilter(tt);u.endUpdate()}function ht(n,r){t.ajax({type:"GET",url:k,data:{idOkruga:n,idOrgana:r},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;t!=i&&(t.Klase&&t.Klase.length>0&&h.quiComboBox("setItemsFromBinding",t.Klase,"Naziv","IdElementa"),t.Jedinice&&t.Jedinice.length>0&&c.quiComboBox("setItemsFromBinding",t.Jedinice,"Naziv","IdElementa"))},complete:function(){}})}var f,e,o,h,l,c,v,y,p=150,b=100,a=300,k,d,g,s={},r,u,nt={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f=qUtils.IzvuciVM("#vm",!0);y=new Date;s={};r=i;k=t("#url_VratiKlaseJedinice").text();d=t("#url_VratiObrisanePredmete").text();g=t("#url_AktivirajPredmet").text();e=t("#pretragaObrisanihOkruzi");o=t("#pretragaObrisanihOrgani");h=t("#pretragaObrisanihKlase");v=t("#pretragaObrisanihPredmet");l=t("#pretragaObrisanihGodine");c=t("#pretragaObrisanihJedinice");e.quiComboBox({listWidth:a,width:p,showX:!0});e.quiComboBox("setItemsFromBinding",f.Okruzi,"Naziv","IdElementa");f.Okruzi&&f.Okruzi.length==1&&(e.quiComboBox("selectItemByIndex",0),e.quiComboBox("enable",!1));o.quiComboBox({listWidth:a,width:p,showX:!0});o.quiComboBox("setItemsFromBinding",f.Organi,"Naziv","IdElementa");h.quiComboBox({listWidth:a,width:p,showX:!0});h.quiComboBox("setItemsFromBinding",f.Klase,"Naziv","IdElementa");l.quiComboBox({listWidth:a,width:b,showX:!0});l.quiComboBox("setItemsFromBinding",f.Godine,"Naziv","IdElementa");l.quiComboBox("selectItemByData",y.getFullYear());c.quiComboBox({listWidth:a,width:b,showX:!0});c.quiComboBox("setItemsFromBinding",f.Jedinice,"Naziv","IdElementa");o.on("select",function(){var n=e.quiComboBox("getSelectedItemData"),t=o.quiComboBox("getSelectedItemData");h.quiComboBox("clearItems");c.quiComboBox("clearItems");n!=i&&ht(n,t)});t("#pretragaObrisanihBtnReset").click(et);t("#pretragaObrisanihBtnPretrazi").click(ot);t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}}(window.qPretragaObrisanih=window.qPretragaObrisanih||{},jQuery),function(n,t,i){function nt(n){var t,u;for(t in s)if(t!==i&&s[t]!==""&&((u=r.getColumns()[r.getColumnIndex(t)],n[u.field]==i)||!n[u.field].toLowerCase().contains(s[t].toLowerCase())))return!1;return!0}function tt(n,t,r,u,f){return f.IdPredmeta!=i?'<i class="fa fa-reply link" data-id="'+f.IdPredmeta+'"><\/i>':""}function it(n,t,r,u,f){return f.IdPredmeta!=i?'<div class="qTdPopupPredmeti" data-idPredmeta="'+f.IdPredmeta+'">'+nonull(r)+"<\/div>":""}function w(n,t,i){return nonull(i)}function rt(n){return n+1}function ut(){f.Okruzi&&f.Okruzi.length>1&&e.quiComboBox("clearSelection");o.quiComboBox("clearSelection");h.quiComboBox("clearSelection");l.quiComboBox("selectItemByData",y.getFullYear());v.val("");c.quiComboBox("clearSelection");t("#pretragaRokovnikNemaRez").hide();t("#pretragaRokovnikSlickGrid").empty();t("#pretragaRokovnikSlickGridPager").empty();s={};r=i}function ft(){var n=t("#pretragaRokovnikBtnPretrazi").find("table");if(!n.hasClass("teloDugmeIskljuceno")){r=i;t("#pretragaRokovnikSlickGrid").empty();t("#pretragaRokovnikSlickGridPager").empty();var y=o.quiComboBox("getSelectedItemData"),u=h.quiComboBox("getSelectedItemData"),s=i,f=c.quiComboBox("getSelectedItemData"),a=i;y==i&&(s=u,u=i,a=f,f=i);n.addClass("teloDugmeIskljuceno");t.ajax({type:"GET",url:d,data:{idOkruga:e.quiComboBox("getSelectedItemData"),idOrgana:o.quiComboBox("getSelectedItemData"),idKlase:u,oznakaKlase:s,brojPredmeta:v.val().trimnull(),godina:l.quiComboBox("getSelectedItemData"),idJedinice:f,oznakaJedinice:a},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var i=n.Data;i&&i.length>0?(et(i),t("#pretragaRokovnikNemaRez").hide()):t("#pretragaRokovnikNemaRez").show()},complete:function(){n.removeClass("teloDugmeIskljuceno")}})}}function et(n){var e,f,c,o,h,l,a;for(s={},e=[],f=0;f<n.length;++f)c=n[f],o=t.extend({},c),o.id=f,e.push(o);h=[{field:"IdPredmeta",name:"",id:0,width:30,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd tac",formatter:tt,customPolje:!0},{field:"RedniBroj",name:qKonverzija.VratiLokalizovaniTekst("Redni broj"),id:1,width:75,sortable:!1,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:rt},{field:"SifraPredmeta",name:qKonverzija.VratiLokalizovaniTekst("Šifra predmeta"),id:2,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:it},{field:"Podnosilac",name:qKonverzija.VratiLokalizovaniTekst("Podnosilac"),id:3,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"NazivInspektora",name:qKonverzija.VratiLokalizovaniTekst("Inspektor"),id:4,width:200,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w},{field:"Sadrzaj",name:qKonverzija.VratiLokalizovaniTekst("Sadržaj"),id:5,width:425,sortable:!0,headerCssClass:"qTabelaHeadTd",cssClass:"qTabelaTd",formatter:w}];u=new Slick.Data.DataView;r=new Slick.Grid("#pretragaRokovnikSlickGrid",u,h,g);r.setSelectionModel(new Slick.RowSelectionModel);l=new Slick.Controls.Pager(u,r,t("#pretragaRokovnikSlickGridPager"));a=new Slick.Controls.ColumnPicker(h,r,g);u.onRowCountChanged.subscribe(function(){r.updateRowCount();r.render()});u.onRowsChanged.subscribe(function(n,t){r.invalidateRows(t.rows);r.render()});t(r.getHeaderRow()).delegate(":input","change keyup",function(){var n=t(this).data("columnId");n!=null&&(s[n]=t.trim(t(this).val()),u.refresh())});r.onHeaderRowCellRendered.subscribe(function(n,i){if(t(i.node).empty(),i.column.id!=0&&i.column.id!=1){var r=t("<input type='text'>");r.data("columnId",i.column.id).val(s[i.column.id]);r.appendTo(i.node)}else t(i.node).addClass("no-filter")});r.onSort.subscribe(function(n,t){var r=function(n,r){var c=t.sortCol.field,e=t.sortAsc?1:-1,u=n[c],f=r[c],o,s,h;return u!=i&&f==i?1*e:u==i&&f!=i?-1*e:u==i&&f==i?0:(s=u.toLowerCase(),h=f.toLowerCase(),o=(s==h?0:s>h?1:-1)*e,o!=0)?o:0};u.sort(r)});r.onClick.subscribe(function(n,i){var u=i.row;if(t(n.target).hasClass("link")){n.stopImmediatePropagation();var f=r.getDataItem(u),e="&idPredmeta="+f.IdPredmeta+"&close=true",o="#./Predmeti?tipDokumenta=3"+e;window.open(location.origin+o,"_blank")}});r.init();u.beginUpdate();u.setItems(e);u.setFilter(nt);u.endUpdate()}function ot(n,r){t.ajax({type:"GET",url:k,data:{idOkruga:n,idOrgana:r},success:function(n){if(n.Greska){PrikaziProzor(!0,!0,qKonverzija.VratiLokalizovaniTekst("GREŠKA"),n.Poruka,"greska");return}var t=n.Data;t!=i&&(t.Klase&&t.Klase.length>0&&h.quiComboBox("setItemsFromBinding",t.Klase,"Naziv","IdElementa"),t.Jedinice&&t.Jedinice.length>0&&c.quiComboBox("setItemsFromBinding",t.Jedinice,"Naziv","IdElementa"))},complete:function(){}})}var f,e,o,h,l,c,v,y,p=150,b=100,a=300,k,d,s={},r,u,g={editable:!1,enableCellNavigation:!0,showHeaderRow:!0,headerRowHeight:30,explicitInitialization:!0,rowHeight:20};n.Init=function(){f=qUtils.IzvuciVM("#vm",!0);y=new Date;s={};r=i;k=t("#url_VratiKlaseJedinice").text();d=t("#url_VratiPredmeteRokovnika").text();e=t("#pretragaRokovnikOkruzi");o=t("#pretragaRokovnikOrgani");h=t("#pretragaRokovnikKlase");v=t("#pretragaRokovnikPredmet");l=t("#pretragaRokovnikGodine");c=t("#pretragaRokovnikJedinice");e.quiComboBox({listWidth:a,width:p,showX:!0});e.quiComboBox("setItemsFromBinding",f.Okruzi,"Naziv","IdElementa");f.Okruzi&&f.Okruzi.length==1&&(e.quiComboBox("selectItemByIndex",0),e.quiComboBox("enable",!1));o.quiComboBox({listWidth:a,width:p,showX:!0});o.quiComboBox("setItemsFromBinding",f.Organi,"Naziv","IdElementa");h.quiComboBox({listWidth:a,width:p,showX:!0});h.quiComboBox("setItemsFromBinding",f.Klase,"Naziv","IdElementa");l.quiComboBox({listWidth:a,width:b,showX:!0});l.quiComboBox("setItemsFromBinding",f.Godine,"Naziv","IdElementa");l.quiComboBox("selectItemByData",y.getFullYear());c.quiComboBox({listWidth:a,width:b,showX:!0});c.quiComboBox("setItemsFromBinding",f.Jedinice,"Naziv","IdElementa");o.on("select",function(){var n=e.quiComboBox("getSelectedItemData"),t=o.quiComboBox("getSelectedItemData");h.quiComboBox("clearItems");c.quiComboBox("clearItems");n!=i&&ot(n,t)});t("#pretragaRokovnikBtnReset").click(ut);t("#pretragaRokovnikBtnPretrazi").click(ft);t(window).on("resize.slickgrid",function(){r!=i&&r.resizeCanvas()})}}(window.qPretragaRokovnik=window.qPretragaRokovnik||{},jQuery);